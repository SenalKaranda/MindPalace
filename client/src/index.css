:root {
  /* Default theme colors - will be overridden by theme system when it loads */
  --primary: #9E7FFF;
  --secondary: #38bdf8;
  --accent: #636363;
  --background: #0f0f0f;
  --surface: #1a1a1a;
  --card-bg: #3a3a3a;
  --text: #ffffff;
  --text-secondary: #e5e5e5;
  --border: #2a2a2a;
  --card-border: #4a4a4a;
  --success: #10b981;
  --warning: #f59e0b;
  --error: #ef4444;
  
  /* RGB variables for rgba() support */
  --primary-rgb: 158, 127, 255;
  --secondary-rgb: 56, 189, 248;
  --accent-rgb: 99, 99, 99;
  --background-rgb: 15, 15, 15;
  --surface-rgb: 26, 26, 26;
  --card-bg-rgb: 58, 58, 58;
  --text-rgb: 255, 255, 255;
  --text-secondary-rgb: 229, 229, 229;
  --border-rgb: 42, 42, 42;
  --card-border-rgb: 74, 74, 74;
  --success-rgb: 16, 185, 129;
  --warning-rgb: 245, 158, 11;
  --error-rgb: 239, 68, 68;
  
  /* Other variables */
  --backdrop-blur: blur(10px);
  --bottom-bar-height: 56px; /* MD3 standard (was 40px) */
  --container-background-override: var(--gradient);
  --dynamic-text-size: 16px;
  --dynamic-card-width: 300px;
  --dynamic-card-padding: 20px;
  --dynamic-card-height: 200px;
  --gradient: linear-gradient(135deg, var(--background) 0%, var(--surface) 100%);
  --bottom-bar-bg: rgba(var(--surface-rgb), 0.95);
  
  /* MD3 Spacing Scale - Can be overridden by theme settings */
  --spacing-xs: 4px;   /* Tight spacing (icons, small elements) */
  --spacing-sm: 8px;   /* Small spacing (related elements) */
  --spacing-md: 16px;  /* Medium spacing (sections) */
  --spacing-lg: 24px;  /* Large spacing (major sections, widget margins) */
  --spacing-xl: 32px;  /* Extra large spacing (between major components) */
  --spacing-xxl: 48px; /* Maximum spacing */
  
  /* Typography - Can be overridden by theme settings */
  --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
  --base-font-size: 16px;
  --line-height: 1.5;
  --letter-spacing: -0.01em;
  --font-weight: 400;
  
  /* Borders - Can be overridden by theme settings */
  --border-radius-small: 8px;
  --border-radius-medium: 12px;
  --border-radius-large: 16px;
  --border-radius-xlarge: 24px;
  --border-width: 1px;
  --border-style: solid;
  
  /* MD3 Elevation System */
  --elevation-0: none;
  --elevation-1: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);
  --elevation-2: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);
  --elevation-3: 0 10px 20px rgba(0, 0, 0, 0.19), 0 6px 6px rgba(0, 0, 0, 0.23);
  
  /* Legacy shadow for backward compatibility */
  --shadow: var(--elevation-1);
}

/* Override MUI Card/Paper default text colors to use theme variables */
.MuiCard-root,
.MuiPaper-root {
  color: var(--text) !important;
}

.MuiCard-root .MuiTypography-root,
.MuiPaper-root .MuiTypography-root {
  color: var(--text) !important;
}

/* Ensure all icons in buttons use theme colors */
.MuiIconButton-root .MuiSvgIcon-root {
  color: inherit;
}

.MuiButton-root .MuiSvgIcon-root {
  color: inherit;
}

/* Override MUI ToggleButton default styling to use theme variables */
.MuiToggleButton-root {
  color: var(--text-secondary) !important;
  border-color: var(--border) !important;
  background-color: transparent !important;
}

.MuiToggleButton-root:hover {
  background-color: rgba(var(--primary-rgb), 0.08) !important;
  color: var(--primary) !important;
}

.MuiToggleButton-root.Mui-selected {
  color: var(--primary) !important;
  background-color: rgba(var(--primary-rgb), 0.12) !important;
}

.MuiToggleButton-root.Mui-selected:hover {
  background-color: rgba(var(--primary-rgb), 0.16) !important;
  color: var(--primary) !important;
}

.MuiToggleButtonGroup-root {
  border-color: var(--border) !important;
}

/* Ensure TextField inputs use theme colors */
.MuiTextField-root .MuiOutlinedInput-root {
  color: var(--text) !important;
}

.MuiTextField-root .MuiOutlinedInput-root fieldset {
  border-color: var(--border) !important;
}

.MuiTextField-root .MuiOutlinedInput-root:hover fieldset {
  border-color: var(--primary) !important;
}

.MuiTextField-root .MuiOutlinedInput-root.Mui-focused fieldset {
  border-color: var(--primary) !important;
}

.MuiTextField-root .MuiInputLabel-root {
  color: var(--text-secondary) !important;
}

.MuiTextField-root .MuiInputLabel-root.Mui-focused {
  color: var(--primary) !important;
}

/* Theme variables are set by theme.js applyThemeSettings() */
/* [data-theme="light"] selector removed - theme system handles this */

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body {
  width: 100%;
  max-width: 100vw;
  overflow-x: hidden; /* Prevent horizontal scrolling */
}

body {
  font-family: var(--font-family, 'Inter'), -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
  background: var(--container-background-override);
  background-attachment: fixed;
  color: var(--text);
  line-height: var(--line-height, 1.5);
  letter-spacing: var(--letter-spacing, -0.01em);
  font-size: var(--base-font-size, 16px);
  font-weight: var(--font-weight, 400);
  min-height: 100vh;
  padding-bottom: var(--bottom-bar-height);
}

.container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 20px;
  background: var(--container-background-override);
  min-height: calc(100vh - var(--bottom-bar-height));
}

.card {
  background: var(--card-bg);
  border: var(--border-width, 1px) var(--border-style, solid) var(--card-border);
  border-radius: var(--border-radius-large, 16px);
  padding: var(--dynamic-card-padding);
  box-shadow: var(--elevation-1); /* MD3 elevation level 1 */
  transition: all 0.3s ease;
  backdrop-filter: var(--backdrop-blur);
}

.card:hover {
  box-shadow: var(--elevation-2); /* MD3 elevation level 2 on hover */
  transform: translateY(-1px); /* Subtle lift */
}

.card.transparent-card {
  background: transparent;
  backdrop-filter: none;
  border: 1px solid rgba(var(--text-rgb, 255, 255, 255), 0.1);
}

/* React Grid Layout Styles */
.react-grid-layout {
  position: relative;
  transition: height 200ms ease;
  width: 100% !important; /* Ensure grid doesn't exceed container */
  max-width: 100% !important;
  box-sizing: border-box;
}

.react-grid-item {
  transition: all 200ms ease;
  transition-property: left, top, width, height;
}

/* Allow toolbar to show above selected widgets */
.react-grid-item:has(.widget-wrapper.selected) {
  overflow: visible !important;
}

.react-grid-item img {
  pointer-events: none;
  user-select: none;
}

.react-grid-item > .react-resizable-handle {
  display: none;
}

.react-grid-item:has(.selected) > .react-resizable-handle-s {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 48px;
  cursor: ns-resize;
  background-color: var(--accent);
  color: var(--text);
  border-radius: 0 0 8px 8px;
  box-shadow: 0 -2px 8px rgba(var(--background-rgb, 0, 0, 0), 0.2);
  z-index: 1002;
  user-select: none;
  font-size: 0.75rem;
}

.react-grid-item:has(.selected) > .react-resizable-handle-s::after {
  content: "⇕ Drag to Resize Height • Click outside to deselect";
}

.react-grid-item:has(.selected) > .react-resizable-handle-s:hover {
  filter: brightness(1.1);
}

.react-grid-item.react-grid-placeholder {
  background: var(--accent);
  opacity: 0.2;
  transition-duration: 100ms;
  z-index: 2;
  border-radius: 16px; /* MD3 large border radius (was 8px) */
}

.react-grid-item.cssTransforms {
  transition-property: transform, width, height;
}

.react-grid-item.resizing {
  transition: none;
  z-index: 100;
}

.react-grid-item.react-draggable-dragging {
  transition: none;
  z-index: 100;
}

.react-grid-item.dropping {
  visibility: hidden;
}

/* Scrollbar Styles */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--surface);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: var(--border);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--text-secondary);
}

/* Responsive Design */
@media (max-width: 768px) {
  .container {
    padding: 10px;
  }
  
  .card {
    padding: 15px;
  }
}
